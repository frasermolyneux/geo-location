trigger: none
pr: none

# Added valid scheduled cleanup (weekly Saturday 04:30 UTC) to consistently clean dev resources.
# Assumption: Automated cleanup desired; adjust cron or remove block if manual-only is preferred.
schedules:
  - cron: "30 4 * * 6"
    displayName: "Weekly Destroy Development (Sat 04:30 UTC)"
    branches:
      include:
        - main
    always: true

pool:
  vmImage: ubuntu-latest

resources:
  repositories:
    - repository: ado-pipeline-templates
      type: github
      name: frasermolyneux/ado-pipeline-templates
      endpoint: github.com_frasermolyneux

stages:
  - stage: clean_up_dev_resources
    jobs:
      - deployment: clean_up_dev_resources
        environment: geo-location-Development
        workspace:
          clean: all

        strategy:
          runOnce:
            deploy:
              steps:
                - task: AzureCLI@2
                  displayName: DestroyDevResources
                  inputs:
                    azureSubscription: "spn-geo-location-development"
                    scriptType: "pscore"
                    scriptLocation: "inlineScript"
                    inlineScript: |
                      Write-Host "TODO"
